2001-07-31  Michael Meeks  <michael@ximian.com>

	* configure.in: Version 1.96.1

2001-07-30  Michael Meeks  <michael@ximian.com>

	* gnome-canvas-widget.c (gnome_canvas_widget_class_init): upd.
	(gnome_canvas_widget_translate): kill.

	* gnome-canvas-line.c (gnome_canvas_line_translate): kill.
	(recalc_bounds): ditto.

	* gnome-canvas.c (gnome_canvas_request_update): impl using
	a virtual method.
	(gnome_canvas_request_update_real): impl here.
	(gnome_canvas_class_init): hook up here.

	* gnome-canvas.h (GnomeCanvasClass): Remove deprecated 'translate'
	virtual method.

	* gnome-canvas.c: kill OLD_XFORM code around the place.

2001-07-11  Lauris Kaplinski  <lauris@ximian.com>

	* gnome-canvas-rect-ellipse.c (gnome_canvas_ellipse_update): Create
	4-segment bpath instead of 90-segment vpath

	* gnome-canvas-shape.c (gnome_canvas_shape_ensure_gdk_points): New function
	(gnome_canvas_shape_update_gdk): Fixed bug allocating as many points as
	there was bpaths, use dynamic growing instead.
	Also fixed adding open paths to wrong list and drawing as polygon

	* gnome-canvas-shape-private.h: Added len_points member to Gdk structure

2001-07-04  Michael Meeks  <michael@ximian.com>

	* gnome-canvas-text.c (gnome_canvas_text_class_init):
	s/GTK_TYPE_PANGO_FONT_DESCRIPTION/PANGO_TYPE_FONT_DESCRIPTION/

Mon Jul  2 06:53:24 2001  Tim Janik  <timj@gtk.org>

	* gnome-canvas.c: s/shutdown/dispose/ according to recent
	GObject changes.

2001-06-28  Michael Meeks  <michael@ximian.com>

	* gnome-canvas-path-def.c (gnome_canvas_path_def_closepath): 
	fix a broken asumption that realloc will not move the memory.

2001-06-28  Cody Russell  <bratsche@gnome.org>

	* gnome-canvas-text.c: #include <string.h> to avoid warning.

Tue Jun 26 12:49:35 2001  Tim Janik  <timj@gtk.org>

	* gnome-canvas-text.c (gnome_canvas_text_destroy): only free
	text->private->bitmap.buffer if text->private!=NULL, as a comment
	in this function says, ::destroy may be run multiple times.

Tue Jun 26 12:14:31 2001  Tim Janik  <timj@gtk.org>

	* libgnomecanvas-2.0.pc: add missing -I include directive in
	CFlags, so third-party code compiles.
	
	* gnome-canvas-shape.c (gnome_canvas_shape_point): put a on-shot
	FIXME warning here for shape->priv->fill_set == TRUE &&
	shape->priv->fill_svp == NULL and avoid segfaulting in user-code.

Tue Jun 26 11:29:54 2001  Tim Janik  <timj@gtk.org>

	* libgnomecanvas-2.0.pc.in (Requires): fix deps, we actually require
	pangoft2 and not libgnome-2.0.

2001-06-25  Jens Finke <jens@gnome.org>

	* gnome-canvas-bpath.h, gnome-canvas-clipgroup.h,
	gnome-canvas-line.h, gnome-canvas-path-def.h,
	gnome-canvas-pixbuf.c, gnome-canvas-polygon.h,
	gnome-canvas-rect-ellipse.h, gnome-canvas-shape-private.h,
	gnome-canvas-shape.h, gnome-canvas-text.h, gnome-canvas-widget.h:
	Removed deprecated includes, use G_BEGIN_DECLS instead of
	GNOME_BEGIN_DECLS. Prefixed package headers with libgnomecanvas/
	where they get included.

2001-06-25  Rusty Conover <rconover@bangtail.net>

	* gnome-canvas-text.c (gnome_canvas_text_destroy,
	gnome_canvas_text_init): Added code to handle cached Pango text
	bitmaps.

	* gnome-canvas-text.c (gnome_canvas_text_set_property: Added code
	to mark the cached Pango bitmap of the text as dirty causing it to
	be rerendered the next time the item's render method is invoked.

	* gnome-canvas-text.c (gnome_canvas_text_render): A bunch of
	changes:

	First, a change to allow caching of Pango's rendering of the text
	so it need not be rerendered everytime.  This makes rendering
	large amounts of text much faster in AA mode.

	Second, the method of clipping of text was changed so that the
	Pango's rendering buffer is sized the same as the clip rectangle
	if enabled.  If clipping is enabled an offset is also applied to
	the text's rendering to reflect the anchor of the clipping
	rectangle.  

	Third, I made the item respect the anchor argument in AA mode and
	be generally more sane with its positioning as pointed out by Tim
	Janik <timj@gtk.org>.  Also made the item respect the anchor
	offset parameters.  Neither of these properties were getting their
	proper respect, but I think they are a little bit closer to
	working correctly now, maybe.

	* gnome-canvas-text.c (gnome_canvas_text_point): Changed this
	method in attempt to make it actually function.  It seems to work
	better now.
	
	* gnome-canvas-text.h: Added GnomeCanvasTextPrivate which is a
	private structure to store the cached rendering of the text done
	by Pango.  This speeds up the rendering method signifigantly for
	large amounts of text. Since the text need not be rerasterized by
	Pango since it is cached; only the item rgba affine need be
	applied to the cached bitmap.

2001-06-20  Rusty Conover  <rconover@bangtail.net>

	* This is the start of the changes to convert most shape items to
	using GnomeCanvasShapeItem, which is essentially a Bezier path
	item.  Now shapes will only need to construct bezier paths and
	inherit the rest of the behavior from the GnomeCanvasShapeItem.

	* gnome-canvas-shape.h gnome-canvas-shape-private.h
	gnome-canvas-shape.c: Added for implmenation of
	GnomeCanvasShapeItem which is a generic Bezier path item, but
	allows easy subclassing for shapes.
	
	* gnome-canvas-bpath.[c|h]: Moved this object to using the
	GnomeCanvasShapeItem.  Removed a bunch of duplicate code.
	
	* gnome-canvas-polygon.[c|h]: Modified this object to use the
	GnomeCanvasShapeItem.  Again removed a bunch of duplicate code
	eliminated since it is implemented in the shape item.
	
	* gnome-canvas-rect-ellipse.[c|h]: Modified this object to use the
	GnomeCanvasShapeItem.
	
	* gnome-canvas-text.c (gnome_canvas_text_set_properties): Fixed
	the stipple parameters handling.
	
	* gnome-canvas-bpath-private.h: Removed as it is no longer used.
	
	* libgnomecanvas.h: Added gnome-canvas-bpath.h to the list of
	default includes since bpaths are quite popular.
		
	* Miscellaneous makefile fixes so that the module passes make
	distcheck.
	
2001-06-18  Cody Russell  <bratsche@gnome.org>

	* gnome-canvas.[ch]: Added some new signals to GnomeCanvasItem.

2001-06-17  Lauris Kaplinski  <lauris@ximian.com>

	* gnome-canvas-path-def.c (gnome_canvas_path_def_copy): Free dst->bpath
	only for non-static paths.
	Lots of typo and other small fixes for inline docs

2001-06-17    <rconover@gnome.org>

	* gp-path.c gp-path.h: Removed since they are now replaces with
	gnome-canvas-path-def.c and gnome-canvas-path-def.h.  Applied this
	renaming change to the rest of the module and removed the
	appropriate files from cvs.

2001-06-16  Cody Russell  <bratsche@gnome.org>

	* gnome-canvas-clipgroup.[ch]: Installed.

2001-06-16  Rusty Conover  <rconover@gnome.org>

	* gnome-canvas-text.c (gnome_canvas_text_set_property): Got the
	text item to play nicely with Pango to render text in AA mode.
	Just a simple change of a gchar * to a PangoLanguage *.

2001-06-13  Martin Baulig  <baulig@suse.de>

	* Makefile.am: Install libgnomecanvas.h in `$(includedir)/gnome/2' to make it
	consistent with Bonobo.

	* libgnomecanvas.h: You now use #include <libgnomecanvas.h> to get this.

2001-06-11  Cody Russell  <bratsche@gnome.org>

	* gnome-canvas-rect-ellipse.c: Don't cast the RectEllipse to GtkWidget.  Use
	item->canvas instead.  I think this will be correct.

	* gnome-canvas-text.c: Fix some weird Pango issues with 
	gnome_canvas_text_set_property ().

2001-06-11  Cody Russell  <bratsche@gnome.org>

	* Makefile.am: Updates for GnomeCanvasBpath.

	* gnome-canvas-pixbuf.c: Fixed some weird switch/enum warnings
	by adding default: tag to the switch.

	* gnome-canvas-text.c: Fixed some weird switch/enum warnings
	by adding default: tag to the switch.

	* gnome-canvas-widget.c: Fixed some weird switch/enum warnings
	by adding default: tag to the switch.

	* gnome-canvas-bpath.[ch]: Added.

	* gnome-canvas-bpath-private.h: Added.

	* gp-path.[ch]: Added. (possibly temporarily).

2001-05-21  Joe Shaw  <joe@ximian.com>

	* gnome-canvas.c (emit_event): Use the focused item if we are
	emitting a GDK_FOCUS_CHANGE event so that the proper item is passed
	to the signal emission. Matches behavior on the stable branch 
	(rev 1.93.4.6).

2001-05-21  Joe Shaw  <joe@ximian.com>

	* gnome-canvas.c (gnome_canvas_item_grab_focus): Emit a
	GDK_FOCUS_CHANGE event in the newly focused canvas item. Matches
	behavior on the stable branch (rev 1.93.4.7).

2001-05-18  Joe Shaw  <joe@ximian.com>

	* gnome-canvas.c (gnome_canvas_key): Remove an assertion that
	prevents events (notably key events) from getting to the canvas item.
	Matches behavior on the stable branch.

2001-05-06  ERDI Gergo  <cactus@cactus.rulez.org>

	* gnome-canvas-text.[ch]: new 'scale' property that does 
	post-font-size-setting scaling of font size

2001-05-05  ERDI Gergo  <cactus@cactus.rulez.org>

	* gnome-canvas-text.[ch]: new properties:
	text_markup: the text of the canvas item, with inline Pango markup
	tags
	attributes: A read/writeable Pango attribute list of the rendered
	text

	style, variant, weight, stretch, size, size_points: atomic font 
	properties
	style_set, variant_set, weight_set, stretch_set, size_set: toggles
	usage of font parameters on a per-parameter basis

	underline, strikethrough, rise: atomic attribute elements
	underline_set, strikethrough_set, rise_set: toggles usage of
	attribute elements on a per-element basis
	
2001-04-29  Martin Baulig  <baulig@suse.de>

	* libgnomecanvastypes.c (libgnomecanvas_init): Removed.
	(gnome_canvas_points_get_type): New function.

	* libgnomecanvas.h (GNOME_TYPE_CANVAS_POINTS): #define this
	to gnome_canvas_points_get_type().

	* libgnomecanvas-boxed.defs: Removed.

	* Makefile.am: Don't create the type stuff from gnome-makeenums.pl
	and gnome-maketypes.awk.

2001-04-19  Michael Meeks  <michael@ximian.com>

	* gnome-canvas.c (gnome_canvas_item_shutdown): this
	has to be capable of being called twice, for whatever reason.
	stop xform being double freed.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* libgnomecanvastypes.c (libgnomecanvas_types_init): rename to
	(libgnomecanvas_init): this.

	* Makefile.am: remove libgnomecanvas-init.c

	* libgnomecanvas-init.c: move into libgnomeui/gnome-canvas-init.c

	* libgnomecanvas.h: strip out gnome-program cruft.

	* Makefile.am: remove libgnomebase bits.
	(libgnomecanvas_2_la_SOURCES): add internal header:

	* gnome-canvas-i18n.h: add.

2001-04-15  Martin Baulig  <baulig@suse.de>

	* libgnomecanvas-init.c (gtk_module_info): Depend on libgnomebase,
	not libgnome.

2001-04-12  Martin Baulig  <baulig@suse.de>

	* libgnomecanvas.c: Added GTK+ arg parsing code from gnome-init.c
	here and improved and cleaned the code a bit.

	* libgnomecanvas.h (gtk_module_info): Added external declaration.

2001-04-12  Martin Baulig  <baulig@suse.de>

	* libgnomecanvas.h: #include all of the canvas header files.

	* libgnomecanvas-init.c: Initialize GTK+.

2001-04-12  Martin Baulig  <baulig@suse.de>

	* libgnomecanvas-init.c: New file.
	(libgnomecanvas_module_info): New global variable; this is the
	`GnomeModuleInfo' structure to initialize this module.

	* libgnomecanvastypes.c (gnome_canvas_type_init): Renamed to
	libgnomecanvas_types_init().

	* libgnomecanvas.h: Added external declaration for
	`libgnomecanvas_module_info' and function prototype for
	libgnomecanvas_types_init().

	* libgnomecanvas.h: New header file.
	It #includes <libgnomecanvas/gnome-canvas.h> and
	<libgnomecanvas/gnome-canvas-util.h>.

2001-04-12  Martin Baulig  <baulig@suse.de>

	* libgnomecanvastypes.c: Migrate to GObject.

2001-03-24  Martin Baulig  <baulig@suse.de>

	* libgnomecanvas-boxed.defs (GnomeCanvasPoints): This is
	refcounted and has no init function.

	* libgnomecanvas-2.0.pc.in: Depend on gtk+-2.0.

2001-03-21  Martin Baulig  <baulig@suse.de>

	* maketypes.awk, makeenums.pl: Removed, we now use
	gnome-maketypes.awk and gnome-makeenums.pl which gets
	installed by libgnome-2.

	* libgnomecanvastypes.c: Reflect latest gnome-maketypes.awk
	changes.

2001-03-05  Martin Baulig  <baulig@suse.de>

	* gnome-canvas-pixbuf.[ch]: #include <libgnomecanvas/*.h>
	instead of <libgnome/*.h>.

	* gnome-canvas-line.c, gnome-canvas-polygon.c:
	#include "libgnomecanvastypebuiltins.h".

	* libgnomecanvastypes.c: New file.

	* libgnomecanvas-boxed.defs: New file.
	* libgnomecanvas-2.0.pc.in: New file.

2001-03-05  Martin Baulig  <baulig@suse.de>

	* gnome-canvas*.[ch]: Moved here from gnome-libs/libgnomeui.
	All files are copied directly in CVS so they contain the
	full history.

